window.addEventListener("beforeunload",function(e){e.preventDefault(),e.stopImmediatePropagation(),e.returnValue=""});const socket=io();var playerId;const start=document.getElementById("startbutton");start.onclick=function(e){e.preventDefault(),socket.emit("windowload");var t=document.getElementById("nieten").value,n=document.getElementById("spieler").value;socket.emit("setup",!0,n,t)};const kreditaufnehmen=document.getElementById("kreditaufnehmenbutton"),kredittilgen=document.getElementById("kredittilgenbutton"),kredit=document.getElementById("credit-leftp-money");function cancelkredit(){$("#board").show(),$("#control").show(),$("#credit").hide(),$("#icon-bar a.active").removeClass("active"),$("#logicon").addClass("active")}kreditaufnehmen.onclick=function(e){if(e.preventDefault(),isNaN(document.getElementById("credit-leftp-money").value))return document.getElementById("credit-leftp-money").value="Bitte eine Zahl eingeben.",document.getElementById("credit-leftp-money").style.color="red",!1;var t=kredit.value;if(!confirm(document.getElementById("player"+playerId+"name").innerHTML+", möchtest Du wirklich einen Kredit aufnehmen?"))return!1;online?socket.emit("kreditaufnehmen",t):game.kreditAufnehmen(parseInt(t),playerId),kredit.value="0"},kredittilgen.onclick=function(e){return e.preventDefault(),isNaN(document.getElementById("credit-leftp-money").value)?(document.getElementById("credit-leftp-money").value="Bitte eine Zahl eingeben.",document.getElementById("credit-leftp-money").style.color="red",!1):!!confirm(document.getElementById("player"+playerId+"name").innerHTML+", möchtest Du wirklich deinen Kredit tilgen?")&&(online?socket.emit("kredittilgen",kredit.value):game.kreditTilgen(parseInt(kredit.value),playerId),void(kredit.value="0"))};const next=document.getElementById("nextbutton"),resign=document.getElementById("resignbutton"),creditB=document.getElementById("creditbutton");var round=0;function updateChart(){xValues.push(round),geldMengen.push(meineBank.geldMenge),bankZinsen.push(meineBank.zinsenLotto),round++,myChart.update()}function buy(){socket.emit("buy")}function doResign(){socket.emit("resign")}next.onclick=function(e){e.preventDefault(),socket.emit("next"),"Spielzug beenden"==next.value&&($("#nextbutton").hide(),allow2houses=!1)},socket.on("updateChart",updateChart),resign.onclick=function(e){e.preventDefault(),socket.emit("sozialhilfe")},creditB.onclick=function(e){e.preventDefault(),showCreditMenu()};const buyhouse=document.getElementById("buyhousebutton"),mortgage=document.getElementById("mortgagebutton"),sellhouse=document.getElementById("sellhousebutton");var currentInitiator,currentRecipient,tradeObj;buyhouse.onclick=function(e){e.preventDefault(),socket.emit("buyhouse",getCheckedProperty())},mortgage.onclick=function(e){e.preventDefault(),socket.emit("mortgage",getCheckedProperty())},sellhouse.onclick=function(e){e.preventDefault(),socket.emit("sellhouse",getCheckedProperty())},socket.on("tradeObj",function(e){tradeObj=e});var square,player,meineBank,pcount,highestbidder,highestbid,allow2houses=!1;function readTrade(){for(var e,t,n,o=currentInitiator,d=currentRecipient,i=new Array(12),r=[],a=0;a<12;a++)document.getElementById("tradeleftcheckbox"+a)&&document.getElementById("tradeleftcheckbox"+a).checked?i[a]=1:document.getElementById("traderightcheckbox"+a)&&document.getElementById("traderightcheckbox"+a).checked?i[a]=-1:i[a]=0;document.getElementById("tradeleftcheckboxM")&&document.getElementById("tradeleftcheckboxM").checked?r[0]=1:document.getElementById("traderightcheckboxM")&&document.getElementById("traderightcheckboxM").checked?r[0]=-1:r[0]=0,document.getElementById("tradeleftcheckboxA")&&document.getElementById("tradeleftcheckboxA").checked?r[1]=1:document.getElementById("traderightcheckboxA")&&document.getElementById("traderightcheckboxA").checked?r[1]=-1:r[1]=0,document.getElementById("tradeleftcheckboxY")&&document.getElementById("tradeleftcheckboxY").checked?r[2]=1:document.getElementById("traderightcheckboxY")&&document.getElementById("traderightcheckboxY").checked?r[2]=-1:r[2]=0,0==r[2]&&0==r[1]&&0==r[0]&&(r=[]),e=parseInt(document.getElementById("trade-leftp-money").value,10)||0,e-=parseInt(document.getElementById("trade-rightp-money").value,10)||0,t=parseInt(document.getElementById("trade-leftp-anleihen").value,10)||0,t-=parseInt(document.getElementById("trade-rightp-anleihen").value,10)||0,n=parseInt(document.getElementById("trade-leftp-derivate").value,10)||0,n-=parseInt(document.getElementById("trade-rightp-derivate").value,10)||0,socket.emit("newTrade",o,d,e,i,t,n,r)}function writeTrade(e){resetTrade(e.initiator,e.recipient,!1);for(var t=0;t<12;t++)document.getElementById("tradeleftcheckbox"+t)&&(document.getElementById("tradeleftcheckbox"+t).checked=!1,1===e.property[t]&&(document.getElementById("tradeleftcheckbox"+t).checked=!0)),document.getElementById("traderightcheckbox"+t)&&(document.getElementById("traderightcheckbox"+t).checked=!1,-1===e.property[t]&&(document.getElementById("traderightcheckbox"+t).checked=!0));document.getElementById("tradeleftcheckboxM")&&(document.getElementById("tradeleftcheckboxM").checked=!1,e.assets[0]>0&&(document.getElementById("tradeleftcheckboxM").checked=!0)),document.getElementById("traderightcheckboxM")&&(document.getElementById("traderightcheckboxM").checked=!1,e.assets[0]<0&&(document.getElementById("traderightcheckboxM").checked=!0)),document.getElementById("tradeleftcheckboxA")&&(document.getElementById("tradeleftcheckboxA").checked=!1,e.assets[1]>0&&(document.getElementById("tradeleftcheckboxA").checked=!0)),document.getElementById("traderightcheckboxA")&&(document.getElementById("traderightcheckboxA").checked=!1,e.assets[1]<0&&(document.getElementById("traderightcheckboxA").checked=!0)),document.getElementById("tradeleftcheckboxY")&&(document.getElementById("tradeleftcheckboxY").checked=!1,e.assets[2]>0&&(document.getElementById("tradeleftcheckboxY").checked=!0)),document.getElementById("traderightcheckboxY")&&(document.getElementById("traderightcheckboxY").checked=!1,e.assets[2]<0&&(document.getElementById("traderightcheckboxY").checked=!0)),e.money>0?document.getElementById("trade-leftp-money").value=e.money+"":document.getElementById("trade-rightp-money").value=-e.money+"",e.anleihen>0?document.getElementById("trade-leftp-anleihen").value=e.anleihen+"":document.getElementById("trade-rightp-anleihen").value=-e.anleihen+"",e.derivate>0?document.getElementById("trade-leftp-derivate").value=e.derivate+"":document.getElementById("trade-rightp-derivate").value=-e.derivate+""}function proposeTrade(){return isNaN(document.getElementById("trade-leftp-money").value)?(document.getElementById("trade-leftp-money").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-leftp-money").style.color="red",!1):isNaN(document.getElementById("trade-rightp-money").value)?(document.getElementById("trade-rightp-money").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-rightp-money").style.color="red",!1):isNaN(document.getElementById("trade-leftp-anleihen").value)?(document.getElementById("trade-leftp-anleihen").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-leftp-anleihen").style.color="red",!1):isNaN(document.getElementById("trade-rightp-anleihen").value)?(document.getElementById("trade-rightp-anleihen").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-rightp-anleihen").style.color="red",!1):isNaN(document.getElementById("trade-leftp-derivate").value)?(document.getElementById("trade-leftp-derivate").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-leftp-derivate").style.color="red",!1):isNaN(document.getElementById("trade-rightp-derivate").value)?(document.getElementById("trade-rightp-derivate").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-rightp-derivate").style.color="red",!1):(readTrade(),void setTimeout(()=>{finishProposeTrade()},100))}function tradeAltered(){$("#proposetradebutton").show(),$("#accepttradebutton").hide()}function finishProposeTrade(){var e=tradeObj.money,t=tradeObj.initiator,n=tradeObj.recipient,o=[],d=tradeObj.anleihen,i=tradeObj.derivate,r=tradeObj.assets,a=[];if(0==n.index&&(n.anleihen=n.anleihen,n.derivate=n.derivate),e>0&&e>t.money)return document.getElementById("trade-leftp-money").value=t.name+" hat keine "+e+".",document.getElementById("trade-leftp-money").style.color="red",!1;if("Bank"!=n.name&&e<0&&-e>n.money)return document.getElementById("trade-rightp-money").value=n.name+" hat keine "+-e+".",document.getElementById("trade-rightp-money").style.color="red",!1;if(d>0&&d>t.anleihen)return document.getElementById("trade-leftp-anleihen").value=t.name+" hat keine Anleihen im Wert von "+d+".",document.getElementById("trade-leftp-anleihen").style.color="red",!1;if(d<0&&-d>n.anleihen)return document.getElementById("trade-rightp-anleihen").value=n.name+" hat keine Anleihen im Wert von "+-d+".",document.getElementById("trade-rightp-anleihen").style.color="red",!1;if(i>0&&i>t.derivate)return document.getElementById("trade-leftp-derivate").value=t.name+" hat keine Derivate im Wert von "+i+".",document.getElementById("trade-leftp-derivate").style.color="red",!1;if(i<0&&-i>n.derivate)return document.getElementById("trade-rightp-derivate").value=n.name+" hat keine Derivate im Wert von "+-i+".",document.getElementById("trade-rightp-derivate").style.color="red",!1;for(var c=0;c<12;c++)o[c]=-tradeObj.property[c];for(c=0;c<r.length;c++)a[c]=-r[c];if(!confirm(t.name+", bist du sicher, dass du dieses Angebot an "+n.name+" machen willst?"))return!1;socket.emit("newTrade",n,t,-e,o,-d,-i,a),socket.emit("sendOffer"),cancelTrade()}function cancelTrade(){$("#board").show(),$("#control").show(),$("#trade").hide(),$("#credit").hide(),$("#icon-bar a.active").removeClass("active"),$("#logicon").addClass("active")}function acceptTrade(){if(isNaN(document.getElementById("trade-leftp-money").value))return document.getElementById("trade-leftp-money").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-leftp-money").style.color="red",!1;if(isNaN(document.getElementById("trade-rightp-money").value))return document.getElementById("trade-rightp-money").value="Der Wert muss eine Zahl sein.",document.getElementById("trade-rightp-money").style.color="red",!1;readTrade(),setTimeout(()=>{finishAcceptTrade(!0)},100)}function finishAcceptTrade(e){var t,n,o;t=tradeObj.money,anleihen=tradeObj.anleihen,derivate=tradeObj.derivate,n=tradeObj.initiator,o=tradeObj.recipient,assets=tradeObj.assets;for(var d=0;d<12;d++)isAPropertySelected|=tradeObj.property[d];if(e&&!confirm(n.name+", bist du sicher, dass du diesen Tausch mit "+o.name+" machen willst?"))return!1;for(d=0;d<12;d++)1===tradeObj.property[d]?(socket.emit("changeOwner",d,o.index),socket.emit("addAlert",o.name+" hat "+square[d].name+" von "+n.name+" erhalten.")):-1===tradeObj.property[d]&&(socket.emit("changeOwner",d,n.index),socket.emit("addAlert",n.name+" hat "+square[d].name+" von "+o.name+" erhalten."));3==tradeObj.assets.length&&socket.emit("transferAssets",n.index,o.index,assets),t>0?(socket.emit("pay",n,o,t),socket.emit("addAlert",o.name+" bekommt "+t+" von "+n.name+".")):t<0&&(socket.emit("pay",o,n,-t),socket.emit("addAlert",n.name+" bekommt "+-t+" von "+o.name+".")),anleihen>0?(socket.emit("buyAnleihen",n.index,o.index,anleihen),socket.emit("addAlert",o.name+" bekommt Anleihen im Wert von "+anleihen+" von "+n.name+".")):anleihen<0&&(socket.emit("buyAnleihen",o.index,n.index,-anleihen),socket.emit("addAlert",n.name+" bekommt Anleihen im Wert von "+-anleihen+" von "+o.name+".")),derivate>0?(socket.emit("buyDerivate",n.index,o.index,derivate),socket.emit("addAlert",o.name+" bekommt Derivate im Wert von "+derivate+" von "+n.name+".")):derivate<0&&(socket.emit("buyDerivate",o.index,n.index,-derivate),socket.emit("addAlert",n.name+" bekommt Derivate im Wert von "+-derivate+" von "+o.name+".")),socket.emit("updateOwned"),socket.emit("updateMoney"),$("#board").show(),$("#control").show(),$("#trade").hide(),$("#credit").hide()}function resetTrade(e,t,n){var o,d,i,r,a,c,l;0==t.index?document.getElementById("description-derivate").innerHTML="Derivate (Kurs: "+meineBank.derivateKurs+"):":document.getElementById("description-derivate").innerHTML="Derivate";var u=function(e){var t=this.firstChild.firstChild;t!==e.srcElement&&(t.checked=!t.checked),$("#proposetradebutton").show(),$("#canceltradebutton").show(),$("#accepttradebutton").hide(),$("#rejecttradebutton").hide()},s=document.getElementById("trade-leftp-property"),m=document.getElementById("trade-rightp-property");for(currentInitiator=e,currentRecipient=t;s.lastChild;)s.removeChild(s.lastChild);for(;m.lastChild;)m.removeChild(m.lastChild);for(var p=document.createElement("table"),h=document.createElement("table"),y=0;y<12;y++)if((o=square[y]).owner===e.index)(d=p.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="tradeleftcheckbox"+y,r.title="Check this box to include "+o.name+" in the trade.",(i=d.appendChild(document.createElement("td"))).className="propertycellcolor",i.style.backgroundColor=o.color,1==o.groupNumber||2==o.groupNumber?i.style.borderColor="grey":i.style.borderColor=o.color,i.propertyIndex=y,i.onmouseover=function(){showdeed(this.propertyIndex)},i.onmouseout=hidedeed,(i=d.appendChild(document.createElement("td"))).className="propertycellname",o.mortgage&&(i.title="Mortgaged",i.style.color="grey"),i.textContent=o.name;else if(o.owner===t.index){if(0==t.index)continue;(d=h.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="traderightcheckbox"+y,r.title="Check this box to include "+o.name+" in the trade.",(i=d.appendChild(document.createElement("td"))).className="propertycellcolor",i.style.backgroundColor=o.color,1==o.groupNumber||2==o.groupNumber?i.style.borderColor="grey":i.style.borderColor=o.color,i.propertyIndex=y,i.onmouseover=function(){showdeed(this.propertyIndex)},i.onmouseout=hidedeed,(i=d.appendChild(document.createElement("td"))).className="propertycellname",o.mortgage&&(i.title="Mortgaged",i.style.color="grey"),i.textContent=o.name}p.lastChild?s.appendChild(p):s.textContent=e.name+" hat keine Grundstücke zum Handeln.",h.lastChild?m.appendChild(h):m.textContent=t.name+" hat keine Grundstücke zum Handeln.";for(var g=document.getElementById("trade-leftp-assets"),b=document.getElementById("trade-rightp-assets");g.lastChild;)g.removeChild(g.lastChild);for(;b.lastChild;)b.removeChild(b.lastChild);p=document.createElement("table"),h=document.createElement("table");if(e.yacht>0&&((d=p.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="tradeleftcheckboxY",r.title="Check this box to include Yacht in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-sailboat"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Yacht"),t.yacht>0&&((d=h.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="traderightcheckboxY",r.title="Check this box to include Yacht in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-sailboat"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Yacht"),e.auto>0&&((d=p.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="tradeleftcheckboxA",r.title="Check this box to include Auto in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-car"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Auto"),t.auto>0&&((d=h.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="traderightcheckboxA",r.title="Check this box to include Auto in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-car"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Auto"),e.motorrad>0&&((d=p.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="tradeleftcheckboxM",r.title="Check this box to include Motorrad in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-motorcycle"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Motorrad"),t.motorrad>0&&((d=h.appendChild(document.createElement("tr"))).onclick=u,(i=d.appendChild(document.createElement("td"))).className="propertycellcheckbox",(r=i.appendChild(document.createElement("input"))).type="checkbox",r.id="traderightcheckboxM",r.title="Check this box to include Motorrad in the trade.",(i=d.appendChild(document.createElement("td"))).className="assetcellcolor",i.innerHTML='<i class="fa-solid fa-motorcycle"></i>',(i=d.appendChild(document.createElement("td"))).className="propertycellname",i.textContent="Motorrad"),p.lastChild?g.appendChild(p):g.textContent=e.name+" hat keine Wertgegenstände zum Handeln.",h.lastChild?b.appendChild(h):b.textContent=t.name+" hat keine Wertgegenstände zum Handeln.",document.getElementById("trade-leftp-name").textContent=e.name,l=document.getElementById("trade-rightp-name"),n&&pcount>2){for(;l.lastChild;)l.removeChild(l.lastChild);a=l.appendChild(document.createElement("select"));for(y=1;y<=pcount;y++)y!==e.index&&((c=a.appendChild(document.createElement("option"))).value=y+"",c.style.color=player[y].color,c.textContent=player[y].name,y===t.index&&(c.selected="selected"));(c=a.appendChild(document.createElement("option"))).value="0",c.style.color=meineBank.color,c.textContent=meineBank.name,0===t.index&&(c.selected="selected"),a.onchange=function(){resetTrade(currentInitiator,player[parseInt(this.value,10)],!0)},a.title="Wähle einen Mitspieler zum Handeln aus."}else l.textContent=t.name;document.getElementById("trade-leftp-money").value="0",document.getElementById("trade-rightp-money").value="0",document.getElementById("trade-leftp-anleihen").value="0",document.getElementById("trade-rightp-anleihen").value="0",document.getElementById("trade-leftp-derivate").value="0",document.getElementById("trade-rightp-derivate").value="0"}function setPlayerId(e){1!=(playerId=e)&&($("#zinsen").hide(),$("#setup-nieten, #setup-spieler").hide(),$("#startbutton").hide())}function addAlert(e){$alert=$("#alert"),$(document.createElement("div")).text(e).appendTo($alert),$alert.stop().animate({scrollTop:$alert.prop("scrollHeight")},1e3)}function showEliminatePlayer(e,t){document.getElementById("popuptext").innerHTML=e,document.getElementById("popup").style.width="300px",document.getElementById("popup").style.top="0px",document.getElementById("popup").style.left="0px",option=t,option=option?option.toLowerCase():"","function"!=typeof t&&(t=null),$("#popuptext").append("<div><input type='button' value='OK' id='popupclose' /></div>"),$("#popupclose").focus(),$("#popupclose").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400)}).on("click",eliminatePlayer),$("#popupbackground").fadeIn(400,function(){$("#popupwrap").show()})}function eliminatePlayer(){socket.emit("eliminate")}function setPlayernames(e){for(var t in e)document.getElementById("player"+t+"name").innerHTML=e[t]}function updateMoney(e,t,n,o,d){meineBank=n;var i=(player=e)[t];pcount=d,document.getElementById("pname").innerHTML=i.name,document.getElementById("pmoney").innerHTML="$"+i.money,$(".money-bar-row").hide();for(var r=1;r<=pcount;r++)p_i=player[r],$("#moneybarrow"+r).show(),document.getElementById("p"+r+"moneybar").style.border="2px solid "+p_i.color,document.getElementById("p"+r+"money").innerHTML=p_i.money>0?p_i.money:0,document.getElementById("p"+r+"moneyname").innerHTML=p_i.name,document.getElementById("p"+r+"credit").innerHTML=-p_i.sumKredit,document.getElementById("p"+r+"dispocredit").innerHTML=p_i.money>0?0:p_i.money,document.getElementById("p"+r+"avcredit").innerHTML=p_i.verfuegbareHypothek,document.getElementById("p"+r+"anleihen").innerHTML=p_i.anleihen,document.getElementById("p"+r+"derivate").innerHTML=p_i.derivate;$("#moneybarrow7").show(),document.getElementById("p7money").innerHTML=meineBank.geldMenge,document.getElementById("p7credit").innerHTML=meineBank.zinsenLotto,document.getElementById("p7anleihen").innerHTML=meineBank.anleihen,document.getElementById("p7derivate").innerHTML=meineBank.derivate,$("#moneybarrow8").show(),document.getElementById("p8money").innerHTML=o.staatsSchuld,document.getElementById("p8credit").innerHTML=o.steuer,""===document.getElementById("landed").innerHTML&&$("#landed").hide(),document.getElementById("quickstats").style.borderColor=i.color,t==playerId&&(i.money<0?($("#resignbutton").hide(),$("#creditbutton").show(),$("#nextbutton").show()):($("#resignbutton").hide(),$("#creditbutton").hide(),$("#nextbutton").show()))}function playDiceSound(e){new Audio("client/short-dice-roll.wav").play(),setTimeout(()=>{updateDice(e)},500)}function updateDice(e){if($("#die0").show(),document.images){var t=document.getElementById("die0");t.classList.remove("die-no-img"),t.title="Die ("+e+" spots)";let n='<i class="fa-solid fa-dice-'+{1:"one",2:"two",3:"three",4:"four",5:"five",6:"six"}[e]+'"></i>';t.innerHTML=n}else document.getElementById("die0").textContent=e,document.getElementById("die0").title="Die"}function updateOwned(e,t){var n=getCheckedProperty(),o=e[playerId];$("#option").show(),$("#owned").show();for(var d,i,r="",a=-1,c="",l="",u=0;u<12;u++)if(d=t[u],i=square[u],d.groupNumber&&0===d.owner)$("#cell"+u+"owner").hide(),$("#cell"+u+"house").hide(),$("#cell"+u+"house2").hide();else if(d.groupNumber&&d.owner>0){var s=document.getElementById("cell"+u+"owner");if(s.style.display="block",s.style.backgroundColor=e[d.owner].color,s.title=e[d.owner].name,d.owner!=i.owner&&s.animate([{opacity:0},{opacity:1}],{duration:1e3}),d.house){var m=document.getElementById("cell"+u+"house");if(m.style.display="block",0==i.house&&m.animate([{opacity:0},{opacity:1}],{duration:1e3}),2==d.house){var p=document.getElementById("cell"+u+"house2");p.style.display="block",0==i.house&&p.animate([{opacity:0},{opacity:1}],{duration:1e3})}}else $("#cell"+u+"house").hide(),$("#cell"+u+"house2").hide()}for(u=0;u<12;u++)if((d=t[u]).owner==playerId){if(c="",d.mortgage&&(c="title='Hypothek aufgenommen' style='color: grey;'"),l="",d.house>=1&&d.house<=2)for(var h=1;h<=d.house;h++)l+="<i class=\"fa-solid fa-house\" title='Haus' class='house' ></i>";""===r&&(r+="<table>",a=u),r+="<tr class='property-cell-row'><td class='propertycellcheckbox'><input type='checkbox' id='propertycheckbox"+u+"' /></td><td class='propertycellcolor' style='background: "+d.color+";",r+="' onmouseover='showdeed("+u+");' onmouseout='hidedeed();'></td><td class='propertycellname' "+c+">"+d.name+l+"</td></tr>"}square=t,""===r?(r=o.name+", du besitzt keine Grundstücke.",$("#option").hide()):r+="</table>",document.getElementById("owned").innerHTML=r,n>-1&&document.getElementById("propertycheckbox"+n)?document.getElementById("propertycheckbox"+n).checked=!0:a>-1&&(document.getElementById("propertycheckbox"+a).checked=!0),$(".property-cell-row").on("click",function(){var e=this;$(this).find(".propertycellcheckbox > input").prop("checked",function(e,t){return!t}),$(".propertycellcheckbox > input").prop("checked",function(t,n){if(!$.contains(e,this))return!1}),socket.emit("updateOption")})}function updateOption(e){var t=getCheckedProperty(),n=e[t];if($("#option").show(),t<0||t>=12)return $("#buyhousebutton").hide(),$("#sellhousebutton").hide(),void $("#mortgagebutton").hide();$("#buildings").hide(),buyhousebutton=document.getElementById("buyhousebutton"),sellhousebutton=document.getElementById("sellhousebutton"),$("#mortgagebutton").show(),document.getElementById("mortgagebutton").disabled=!1,n.mortgage?(document.getElementById("mortgagebutton").value="Hypothek zurückzahlen",document.getElementById("mortgagebutton").title="Hypothek auf "+n.name+" für "+n.price+" zurückzahlen.",$("#buyhousebutton").hide(),$("#sellhousebutton").hide(),allGroupUnmortgaged=!1):(document.getElementById("mortgagebutton").value="Hypothek ($"+n.price+")",document.getElementById("mortgagebutton").title="Hypothek auf "+n.name+" für "+n.price+" aufnehmen."),$("#buyhousebutton").show(),$("#sellhousebutton").show(),buyhousebutton.disabled=!1,sellhousebutton.disabled=!1,0==n.house&&($("#sellhousebutton").hide(),buyhousebutton.value="Haus kaufen",buyhousebutton.title="Kaufe ein Haus für "+n.houseprice),n.house>=1&&(allow2houses&&2!=n.house?(buyhousebutton.value="Haus kaufen",buyhousebutton.title="Kaufe ein Haus für "+n.houseprice):$("#buyhousebutton").hide(),sellhousebutton.value="Haus verkaufen",sellhousebutton.title="Verkaufe eine Haus für "+n.houseprice,$("#mortgagebutton").show(),document.getElementById("mortgagebutton").disabled=!1,n.mortgage?(document.getElementById("mortgagebutton").value="Hypothek zurückzahlen",document.getElementById("mortgagebutton").title="Hypothek auf "+n.name+" für "+n.price+" zurückzahlen.",$("#buyhousebutton").hide(),$("#sellhousebutton").hide(),allGroupUnmortgaged=!1):(document.getElementById("mortgagebutton").value="Hypothek ($"+n.price+")",document.getElementById("mortgagebutton").title="Hypothek auf "+n.name+" für "+n.price+" aufnehmen."))}function showdeed2(e){$("#deed").show(),$("#deed-normal").hide(),$("#deed-mortgaged").hide(),$("#deed-special").hide(),e.mortgage?($("#deed-mortgaged").show(),document.getElementById("deed-mortgaged-name").textContent=e.name,document.getElementById("deed-mortgaged-mortgage").textContent=e.price/2):($("#deed-normal").show(),document.getElementById("deed-header").style.backgroundColor=e.color,document.getElementById("deed-name").textContent=e.name,document.getElementById("deed-rent").textContent=e.rent,document.getElementById("deed-houseprice").textContent=e.houseprice)}function displayStats(e){document.getElementById("statstext").innerHTML=e,$("#statsbackground").fadeIn(400,function(){$("#statswrap").show()})}function showGraph(){$("#statsbackground").fadeIn(400,function(){$("#graphwrap").show()})}function changeButton(e,t,n){document.getElementById(e).value=t,document.getElementById(e).title=n}function focusButton(e){document.getElementById(e).focus()}function roll(){$("#option").hide(),$("#buy").show(),$("#manage").hide(),$("#audio").hide(),document.getElementById("nextbutton").focus()}function setHTML(e,t){document.getElementById(e).innerHTML=t}function show(e){$(e).show()}function hide(e){$(e).hide()}function playernumber_onchange(){$(".player-input").hide();for(var e=1;e<=pcount;e++)$("#player"+e+"input").show();switch(pcount){case 6:$("#spieler5").hide(),document.getElementById("spieler5").selected=!0;case 5:$("#spieler4").hide(),document.getElementById("spieler4").selected=!0;case 4:$("#spieler3").hide(),document.getElementById("spieler3").selected=!0}capitalism_onchange(),1==playerId&&pcount<7?$("#startbutton").show():$("#startbutton").hide()}function capitalism_onchange(){$("#nietenfield").show(),$("#spielerfield").show(),$("#nieten0").hide(),$("#nieten1").hide(),$("#nieten2").hide(),$("#nieten4").hide(),$("#nieten7").hide(),$("#nieten8").hide(),$("#nieten10").hide();var e=document.getElementById("spieler").value;switch(parseInt(e)){case 3:$("#nieten0").show(),document.getElementById("nieten0").selected=!0,$("#nieten2").show(),$("#nieten4").show();break;case 4:$("#nieten1").show(),document.getElementById("nieten1").selected=!0,$("#nieten4").show(),$("#nieten7").show();break;case 5:$("#nieten0").show(),document.getElementById("nieten0").selected=!0,$("#nieten4").show(),$("#nieten8").show();break;case 6:$("#nieten2").show(),document.getElementById("nieten2").selected=!0,$("#nieten7").show()}}function getCheckedProperty(){for(var e=0;e<12;e++)if(document.getElementById("propertycheckbox"+e)&&document.getElementById("propertycheckbox"+e).checked)return e;return-1}function openImmobilien(){$("#manage").show(),$("#buy").hide(),$("#audio").hide()}function openLog(){$("#buy").show(),$("#manage").hide(),$("#audio").hide(),cancelkredit(),cancelTrade(),$("#alert").scrollTop($("#alert").prop("scrollHeight"))}function openAudioMenu(){$("#audio").show(),$("#buy").hide(),$("#manage").hide()}function changeZinssatz(){socket.emit("zinssatz",parseInt(document.getElementById("zinssatzInput").value))}function setupSquares(e){var t=document.body.appendChild(document.createElement("div"));t.id="enlarge-wrap";for(var n,o,d,i,r="",a=0;a<12;a++)r+="<div id='enlarge"+a+"' class='enlarge'>",r+="<div id='enlarge"+a+"color' class='enlarge-color'></div><br /><div id='enlarge"+a+"name' class='enlarge-name'></div>",r+="<br /><div id='enlarge"+a+"price' class='enlarge-price'></div>",r+="<br /><div id='enlarge"+a+"token' class='enlarge-token'></div></div>";t.innerHTML=r;for(a=0;a<12;a++)s=e[a],(n=document.getElementById("cell"+a).appendChild(document.createElement("div"))).id="cell"+a+"anchor",n.className="cell-anchor",currentCellColor=n.appendChild(document.createElement("div")),currentCellColor.id="cell"+a+"color",currentCellColor.className="cell-color",currentCellColor.style.backgroundColor=s.color,(o=n.appendChild(document.createElement("div"))).id="cell"+a+"positionholder",o.className="cell-position-holder",o.enlargeId="enlarge"+a,(d=n.appendChild(document.createElement("div"))).id="cell"+a+"name",d.className="cell-name",d.textContent="Ereignisfeld"==s.name?"":s.name,currentCellPrice=n.appendChild(document.createElement("div")),currentCellPrice.id="cell"+a+"price",currentCellPrice.className="cell-price",currentCellPrice.textContent=s.pricetext,currentCellHouse=n.appendChild(document.createElement("div")),currentCellHouse.id="cell"+a+"house",currentCellHouse.className="cell-house",currentCellHouse2=n.appendChild(document.createElement("div")),currentCellHouse2.id="cell"+a+"house2",currentCellHouse2.className="cell-house2",e[a].groupNumber&&((i=n.appendChild(document.createElement("div"))).id="cell"+a+"owner",i.className="cell-owner"),document.getElementById("enlarge"+a+"color").style.backgroundColor=s.color,document.getElementById("enlarge"+a+"name").textContent=s.name,document.getElementById("enlarge"+a+"price").textContent=s.pricetext}function showCreditMenu(){$("#board").hide(),$("#control").hide(),$("#credit").show(),$("#kreditaufnehmenbutton").show(),$("#kredittilgenbutton").show(),document.getElementById("credit-leftp-name").textContent=document.getElementById("p"+playerId+"moneyname").innerHTML,document.getElementById("credit-leftp-money").value="0"}function showTradeMenu(){$("#board").hide(),$("#control").hide(),$("#trade").show(),$("#proposetradebutton").show(),$("#canceltradebutton").show(),$("#accepttradebutton").hide(),$("#rejecttradebutton").hide(),socket.emit("updateSquare"),socket.emit("updatePlayer"),setTimeout(()=>{finishTradeMenu()},200)}function finishTradeMenu(){var e=player[playerId],t=1===playerId?player[2]:player[1];currentInitiator=e,currentRecipient=t,resetTrade(e,t,!0)}function showStats(){socket.emit("showstats")}function rcvPopupReq(e,t,n=!1){n?popup(e,doMortgage,t):popup(e,t)}function doMortgage(){socket.emit("doMortgage",getCheckedProperty())}function preUpdatePosition(e,t,n){for(var o=0;o<12;o++)document.getElementById("cell"+o).style.border="1px solid black";document.getElementById("player"+e+"figure").animate([{opacity:1},{opacity:0}],{duration:1e3}),setTimeout(()=>{updatePosition(e,t,n)},1e3)}function updatePosition(e,t,n){document.getElementById("player"+e+"figure").remove();const o=document.getElementById("cell"+t+"positionholder");NodeList.prototype.forEach=Array.prototype.forEach;var d=o.childNodes,i=0,r=0;d.forEach(function(e){e.style.left=i+"px",e.style.top=r+"px",120==i?(i=0,r=24):i+=24});const a=document.getElementById("cell"+n.position+"positionholder");a.innerHTML+="<div id='player"+e+"figure' class='cell-position' title='"+n.name+"' style='background-color: "+n.color+"; animation-name:changeOpacity; animation-duration: 2s'></div>",NodeList.prototype.forEach=Array.prototype.forEach,d=a.childNodes,i=0,r=0,d.forEach(function(e){e.style.left=i+"px",e.style.top=r+"px",120==i?(i=0,r=24):i+=24}),document.getElementById("cell"+n.position).style.border="1px solid "+n.color}function setName(){setPopuptext("<p>Gib deinen Namen ein</p>");document.getElementById("popuptext").innerHTML+='<div><input type="text" id="playername" title="SpielerIn Name" maxlength="16" /> <input type="button" value="OK" id="namebutton"/></div>',document.getElementById("playername").addEventListener("keyup",function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("namebutton").on("click"))}),$("#namebutton").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400);let e=document.getElementById("playername").value;socket.emit("setName",e)}),$("#popupbackground").fadeIn(400,function(){$("#popupwrap").show()})}function setZinssatz(){setPopuptext("<p>Zinssatz ändern</p>");document.getElementById("popuptext").innerHTML+='<div><input type="number" id="zinssatzInput" title="Zinssatz" maxlength="3" value="5" size="3"/> % <input type="button" value="Ändern" id="zinsbutton"/> <input type="button" value="Schließen" id="closezinsbutton"/></div>',document.getElementById("zinssatzInput").addEventListener("keyup",function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("zinsbutton").click())}),$("#zinsbutton").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400),socket.emit("zinssatz",parseInt(document.getElementById("zinssatzInput").value))}),$("#closezinsbutton, #popupbackground").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400),$("#icon-bar a.active").removeClass("active"),$("#logicon").addClass("active")}),$("#popupbackground").fadeIn(400,function(){$("#popupwrap").show()})}function setPopuptext(e){document.getElementById("popuptext").innerHTML=e,document.getElementById("popup").style.width="300px",document.getElementById("popup").style.top="0px",document.getElementById("popup").style.left="0px"}function popup(e,t,n){setPopuptext(e),n||"string"!=typeof t||(n=t),"function"!=typeof t&&(t=null),"ja/nein"===(n=n?n.toLowerCase():"")?(document.getElementById("popuptext").innerHTML+='<div><input type="button" value="Ja" id="popupyes" /><input type="button" value="Nein" id="popupno" /></div>',$("#popupyes, #popupno").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400)}),$("#popupyes").on("click",t)):"blank"!==n&&($("#popuptext").append("<div><input type='button' value='OK' id='popupclose' /></div>"),$("#popupclose").focus(),$("#popupclose").on("click",function(){$("#popupwrap").hide(),$("#popupbackground").fadeOut(400)}).on("click",t)),$("#popupbackground").fadeIn(400,function(){$("#popupwrap").show()})}function hidedeed(){$("#deed").hide()}function showdeed(e){socket.emit("showdeed",e)}socket.on("buyhouse2",function(e){allow2houses=e}),document.getElementById("trade-leftp-money").onchange=tradeAltered,document.getElementById("trade-rightp-money").onchange=tradeAltered,document.getElementById("trade-leftp-anleihen").onchange=tradeAltered,document.getElementById("trade-rightp-anleihen").onchange=tradeAltered,document.getElementById("trade-leftp-derivate").onchange=tradeAltered,document.getElementById("trade-rightp-derivate").onchange=tradeAltered,document.getElementById("trade-leftp-property").onchange=tradeAltered,document.getElementById("trade-rightp-property").onchange=tradeAltered,document.getElementById("trade-leftp-assets").onchange=tradeAltered,document.getElementById("trade-rightp-assets").onchange=tradeAltered,socket.on("receiveOffer",function(e){initiator=e.initiator,recipient=e.recipient,showTradeMenu(),setTimeout(()=>{writeTrade(e)},200),$("#proposetradebutton").hide(),$("#canceltradebutton").hide(),$("#accepttradebutton").show(),$("#rejecttradebutton").show(),socket.emit("addAlert",recipient.name+" hat einen Handel mit "+initiator.name+" begonnen."),popup("<p>"+recipient.name+" hat dir, "+initiator.name+", einen Tausch angeboten. Du kannst das Angebot annehmen, ablehnen oder verändern.</p>")}),socket.on("updateSquare",function(e){square=e}),socket.on("updatePlayer",function(e,t){player=e,meineBank=t}),socket.on("setPlayerId",function(e){setPlayerId(e)}),socket.on("playerno",function(e){pcount=e,playernumber_onchange()}),socket.on("addAlert",function(e){addAlert(e)}),socket.on("eliminatePlayer",function(e,t){showEliminatePlayer(e,t)}),socket.on("playerNames",function(e){setPlayernames(e)}),socket.on("updateMoney",function(e,t,n,o,d){updateMoney(e,t,n,o,d)}),socket.on("updateDice",function(e){playDiceSound(e)}),socket.on("updateOwned",function(e,t){updateOwned(e,t)}),socket.on("updateOption",function(e){updateOption(e)}),socket.on("showdeed",function(e){showdeed2(e)}),socket.on("showstats",function(e){displayStats(e)}),socket.on("changeButton",function(e,t,n){changeButton(e,t,n)}),socket.on("focusbutton",function(e){focusButton(e)}),socket.on("roll",roll),socket.on("setHTML",function(e,t){setHTML(e,t)}),socket.on("show",function(e,t){t?$(e).show():$(e).hide()}),window.onload=function(){var e,t,n,o,d,i;playernumber_onchange(),$("#spieler").on("change",capitalism_onchange),capitalism_onchange(),$("#noscript").hide(),$("#setup").show(),$("credit").hide(),$("body").on("mousemove",function(r){var a;r.target?a=r.target:window.event&&window.event.srcElement&&(a=window.event.srcElement),a.classList.contains("propertycellcolor")||a.classList.contains("statscellcolor")?(r.clientY+20>window.innerHeight-404?document.getElementById("deed").style.top=window.innerHeight-404+"px":document.getElementById("deed").style.top=r.clientY+20+"px",document.getElementById("deed").style.left=r.clientX+10+"px"):e&&(r?(o.style.left=i+r.clientX-t+"px",o.style.top=d+r.clientY-n+"px"):window.event&&(o.style.left=i+window.event.clientX-t+"px",o.style.top=d+window.event.clientY-n+"px"))}),$("body").on("mouseup",function(){e=!1}),document.getElementById("statsdrag").onmousedown=function(r){(o=document.getElementById("stats")).style.position="relative",d=parseInt(o.style.top,10)||0,i=parseInt(o.style.left,10)||0,window.event?(t=window.event.clientX,n=window.event.clientY):r&&(t=r.clientX,n=r.clientY),e=!0},document.getElementById("graphdrag").onmousedown=function(r){(o=document.getElementById("mgraph")).style.position="relative",d=parseInt(o.style.top,10)||0,i=parseInt(o.style.left,10)||0,window.event?(t=window.event.clientX,n=window.event.clientY):r&&(t=r.clientX,n=r.clientY),e=!0},document.getElementById("popupdrag").onmousedown=function(r){(o=document.getElementById("popup")).style.position="relative",d=parseInt(o.style.top,10)||0,i=parseInt(o.style.left,10)||0,window.event?(t=window.event.clientX,n=window.event.clientY):r&&(t=r.clientX,n=r.clientY),e=!0},$("#graphclose, #statsclose, #statsbackground").on("click",function(){$("#statswrap, #graphwrap").hide(),$("#statsbackground").fadeOut(400),$("#icon-bar a.active").removeClass("active"),$("#logicon").addClass("active")}),setName()},socket.on("setupsquares",function(e){setupSquares(e)}),socket.on("popup",function(e,t,n=!1){rcvPopupReq(e,t,n)}),socket.on("updatePosition",function(e,t,n){preUpdatePosition(e,t,n)}),socket.on("displayFigures",function(e,t){const n=document.getElementById("cell0positionholder");for(var o=1;o<=t;o++)n.innerHTML+="<div id='player"+o+"figure' class='cell-position' title='"+e[o].name+"' style='background-color: "+e[o].color+";'></div>";var d=n.childNodes;left=0,top=0,d.forEach(function(e){e.style.left=left+"px",e.style.top=top+"px",120==left?(left=0,top=24):left+=24})});var auctionproperty,currentbidder=1;function finalizeAuction(){socket.emit("finalizeAuction"),$("#popupbackground").hide(),$("#popupwrap").hide()}function rcvAuction(e,t,n,o,d){player=t,auctionproperty=e,highestbidder=o,highestbid=d,currentbidder=playerId;var i=n[e];popup("<div style='font-weight: bold; font-size: 16px; margin-bottom: 10px;'>Auktion <span id='propertyname'></span></div><div>Höchstes Gebot = $<span id='highestbid'></span> (<span id='highestbidder'></span>)</div><div><span id='currentbidder'></span>, du bist an der Reihe.</div<div><input id='bid' title='Gib ein Gebot für "+i.name+" ab.' style='width: 291px;' /></div><div><input type='button' value='Bieten' onclick='auctionBid();' title='Gib dein Gebot ab.' /><input type='button' value='Aussetzen' title='Diese Runde nicht bieten.' onclick='auctionPass();' /><input type='button' value='Auktion verlassen' title='Nicht mehr für "+i.name+" bieten.' onclick='if (confirm(\"Möchtest du wirklich nicht weiter bieten?\")) auctionExit();' /></div>","blank"),document.getElementById("propertyname").innerHTML="<a href='javascript:void(0);' onmouseover='showdeed("+auctionproperty+");' onmouseout='hidedeed();' class='statscellcolor'>"+i.name+"</a>",document.getElementById("highestbid").innerHTML=parseInt(highestbid,10),document.getElementById("highestbidder").innerHTML=0!=highestbidder?player[highestbidder].name:"N/A",document.getElementById("currentbidder").innerHTML=player[currentbidder].name,document.getElementById("bid").onkeydown=function(e){var t=0,n=!1,o=!1;return window.event?(t=window.event.keyCode,n=window.event.ctrlKey,o=window.event.shiftKey):e&&(t=e.keyCode,n=e.ctrlKey,o=e.shiftKey),!!isNaN(t)||(13===t?(game.auctionBid(),!1):!!(8===t||9===t||46===t||t>=35&&t<=40||n)||!o&&(t>=48&&t<=57||t>=96&&t<=105))},document.getElementById("bid").onfocus=function(){this.style.color="black",isNaN(this.value)&&(this.value="")}}function auctionPass(){0===highestbidder&&(highestbidder=currentbidder),socket.emit("newbid",highestbidder,highestbid),$("#popupbackground").hide(),$("#popupwrap").hide()}function auctionBid(e){""===(e=e||parseInt(document.getElementById("bid").value,10))||null===e?(document.getElementById("bid").value="Gebe ein Gebot ab.",document.getElementById("bid").style.color="red"):isNaN(e)?(document.getElementById("bid").value="Das Gebot muss eine Zahl sein.",document.getElementById("bid").style.color="red"):e>player[currentbidder].money?(document.getElementById("bid").value="Du hast nicht genügend Geld um "+e+" zu bieten.",document.getElementById("bid").style.color="red"):e>highestbid?(highestbid=e,document.getElementById("highestbid").innerHTML=parseInt(e,10),highestbidder=currentbidder,document.getElementById("highestbidder").innerHTML=player[highestbidder].name,document.getElementById("bid").focus(),player[currentbidder].human&&auctionPass()):(document.getElementById("bid").value="Dein Gebot muss höher sein als das höchste Gebot. ($"+highestbid+")",document.getElementById("bid").style.color="red")}function auctionExit(){socket.emit("auctionExit",currentbidder),auctionPass()}socket.on("chooseProperty",function(e,t){for(var n,o=getCheckedProperty(),d=e[playerId],i="",r=-1,a="",c="",l=0;l<12;l++)if((n=t[l]).owner==playerId){if(a="",n.mortgage&&(a="title='Hypothek aufgenommen' style='color: grey;'"),c="",n.house>=1&&n.house<=2)for(var u=1;u<=n.house;u++)c+="<i class=\"fa-solid fa-house\" title='Haus' class='house' ></i>";""===i&&(i+="<p>"+e[playerId].name+", wähle eines der Grundstücke für die Auktion aus, indem du es anklickst. Klicke OK, wenn du fertig bist.</p>",i+="<table>",r=l),i+="<tr class='property-cell-row'><td class='propertycellcheckbox'><input type='checkbox' id='propertycheckbox"+l+"' /></td><td class='propertycellcolor' style='background: "+n.color+";",i+="' onmouseover='showdeed("+l+");' onmouseout='hidedeed();'></td><td class='propertycellname' "+a+">"+n.name+c+"</td></tr>"}""===i?(i=d.name+", du besitzt keine Grundstücke.",$("#option").hide()):i+="</table>",popup(i,function(){var e=getCheckedProperty();socket.emit("auctionHouse",e)},"ok"),o>-1&&document.getElementById("propertycheckbox"+o)?document.getElementById("propertycheckbox"+o).checked=!0:r>-1&&(document.getElementById("propertycheckbox"+r).checked=!0),$(".property-cell-row").on("click",function(){var e=this;$(this).find(".propertycellcheckbox > input").prop("checked",function(e,t){return!t}),$(".propertycellcheckbox > input").prop("checked",function(t,n){if(!$.contains(e,this))return!1}),socket.emit("updateOption")})}),socket.on("auction",function(e,t,n,o,d){rcvAuction(e,t,n,o,d)});var xValues=[],geldMengen=[],bankZinsen=[],myChart=new Chart("myChart",{type:"line",data:{labels:xValues,datasets:[{backgroundColor:"rgba(255,0,0,1.0)",borderColor:"rgba(255,0,0,0.1)",data:geldMengen,label:"Geldmenge",yAxisID:"y"},{backgroundColor:"rgba(0,0,255,1.0)",borderColor:"rgba(0,0,255,0.1)",data:bankZinsen,label:"Zinsen",yAxisID:"y1"}]},options:{responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{},stacked:!1,scales:{y:{type:"linear",display:!0,position:"left"},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1}}}}});let deferredPrompt;"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(()=>{console.log("Service Worker Registered")});const addBtn=document.querySelector(".add-button");var online;addBtn.style.display="none",window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e,addBtn.style.display="block",addBtn.addEventListener("click",e=>{addBtn.style.display="none",deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),deferredPrompt=null})})}),$(document).ready(function(){$("#icon-bar a").on("click",function(e){$("#icon-bar a.active").removeClass("active"),$(this).addClass("active"),e.preventDefault()}),$(".max-button").on("click",function(e){$(this).parent().parent().children(".moneyopt").show(),$(this).parent().children(".min-button").show(),$(this).hide(),e.preventDefault()}),$(".min-button").on("click",function(e){$(this).parent().parent().children(".moneyopt").hide(),$(this).parent().children(".max-button").show(),$(this).hide(),e.preventDefault()})}),window.addEventListener("load",()=>{online=navigator.onLine}),$('[title!=""]').qtip({suppress:"false",show:{event:"click"}});