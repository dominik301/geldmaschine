<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
	<meta charset="utf-8" />
	<title>Geldmaschine - spielerisch unser Geldsystem verstehen</title>
	<meta name="description" content="Das Spiel „Geldmaschine“ hat Samirah Kenawi entwickelt, damit Interessierte sich auf spielerische Weise Wissen über das Funktionieren unseres Geldsystems aneignen können." />
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha384-rY/jv8mMhqDabXSo+UCggqKtdmBfd3qC2/KvyTDNQ6PcUJXaxK1tMepoQda4g5vB" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.min.js"></script>
	<script defer src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha384-7NrRHqlWUj2hJl3a/dZj/a1GxuQc56mJ3aYsEnydBYrY1jR+RSt6SBvK3sHfj+mJ" crossorigin="anonymous"></script>
	<script defer type="text/javascript" src="https://cdn.jsdelivr.net/qtip2/3.0.3/basic/jquery.qtip.min.js" integrity="sha384-TPScrMyn/md54F3igk3Ft1QAMV1ynAp+swO4CxHrDu65zbRWRinbXhFSduK4e1Ce" crossorigin="anonymous"></script>
	<script src="./client/myscript.min.js" defer></script>
	<link rel="icon" type="image/x-icon" href="./client/favicon.ico">
	<link rel="preload" href="./client/styles.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
	<noscript><link rel="stylesheet" href="./client/styles.min.css"></noscript>
	<link rel="preload" href="https://cdn.jsdelivr.net/qtip2/3.0.3/basic/jquery.qtip.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
	<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/qtip2/3.0.3/basic/jquery.qtip.min.css"></noscript>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" integrity="sha512-8Vtie9oRR62i7vkmVUISvuwOeipGv8Jd+Sur/ORKDD5JiLgTGeBSkI3ISOhc730VGvA5VVQPwKIKlmi+zMZ71w==" crossorigin="anonymous" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" integrity="sha512-6/gTF62BJ06BajySRzTm7i8N2ZZ6StspU9uVWDdoBiuuNu5rs1a8VwiJ7skCz2BcvhpipLKfFerXkuzs+npeKA==" crossorigin="anonymous" />
	<link rel="manifest" href="./client/manifest.webmanifest" />
	<link rel="apple-touch-icon" sizes="120x120" href="./client/apple-touch-icon-120x120-precomposed.png" />
	<link rel="apple-touch-icon" sizes="152x152" href="./client/apple-touch-icon-152x152-precomposed.png" />

	<style type="text/css">
		body {
			/*background: #FFFFFF;*/
			background-image: url("client/wood-bright.webp");
			/*background: brown;*/
			background-size: cover;
			margin: 0px;
			font-family: arial, sans-serif;
			font-size:large;
			height: 100%
		}

		button,
		input,
		select {
			font-size:large;
		}

		#description {
			margin-left: 3em;
			margin-right: 3em;
			margin-top: 1em;
			margin-bottom: 1em;
			font-size:small;
		}

		#setup-scrollable {
			overflow-y: scroll;
			height: calc(100vh - 7em);
		}

		button, input {
			background-color: #c8e6c9; /* Blue background */
			border: none; /* Remove borders */
			/*padding: 0.6em 0.8em; /* Some padding */
			cursor: pointer; /* Mouse pointer on hover */
		}

		select {
			background-color: #c8e6c9; /* Blue background */
			border: none; /* Remove borders */
			cursor: pointer; /* Mouse pointer on hover */
		}

		button:hover, input:hover, select:hover {
			background-color: #81c784;
		}

		td {
			border: 1px solid black;
			text-align: center;
		}

		#mytitle {
			font-size: xx-large;
			text-align: center;
			margin-bottom: 1em;
		}

		#setup {
			display: block;
			margin-top: 1em;
		}

		#credits {
			width: 100%;
			position: absolute;
			bottom: 0;
		}

		@media screen and (min-height: 600px) {

			button, input {
				padding: 0.6em 0.8em; /* Some padding */
			}

			#description {
				font-size: medium;
			}
		}

		@media screen and (min-height: 770px) {
			#description {
				font-size:large;
			}
		}

		@media screen and (max-height: 450px) {
			input {
				font-size: small;
			}
		}

		#setup ul {
			list-style-type: none;
			margin: 0;
			padding: 0;
			overflow: hidden;
			background-color: #333;
		}
		
		#setup li {
			float: left;
		}
		
		#setup li a {
			display: block;
			color: white;
			text-align: center;
			padding: 14px 16px;
			text-decoration: none;
		}
		
		#setup li a:hover {
			background-color: #111;
		}

		#setup table {
			border-collapse: collapse;
			border-style: hidden;
			margin: 0 auto;
		}

		#setup table td {
			border: none;
			padding: 0.5em 0;
		}

		@media (prefers-color-scheme: dark) {
			body {
				background-image: url("client/wood-dark.webp");
				background-color: black;
				color: white;
			}

			button, input, select {
				background-color: #1b5e20; /* Blue background */
				color: white; /* White text */
			}

			button:hover, input:hover, select:hover {
				background-color: #388e3c;
			}
		}
	</style>
</head>

<body onload="showSetup();">
	<div id="popupbackground"></div>
	<div id="popupwrap">
		<div id="popup">
			<div style="position: relative;">
				<div id="popuptext"></div>
				<div id="popupdrag"></div>
			</div>
		</div>
	</div>

	<div id="statsbackground"></div>
	<div id="statswrap">
		<div id="stats">
			<div style="position: relative;">
				<span id="statsclose" title="Schließen"><i class="fa-solid fa-circle-xmark"></i></span>
				<div id="statstext"></div>
				<div id="statsdrag"></div>
			</div>
		</div>
	</div>

	<div id="graphwrap">
		<div id="mgraph">
			<div style="position: relative;">
				<span id="graphclose" title="Schließen"><i class="fa-solid fa-circle-xmark"></i></span>
				<div id="graphtext"><span>Spielverlauf</span></div>
				<div id="graphdrag"></div>
				<div id="graph">
					<canvas id="myChart" width="183px" height="150px"></canvas>
				</div>
			</div>
		</div>
	</div>

	<div id="refresh">
		Lade die Seite neu, um ein neues Spiel zu beginnen.
	</div>

	<div id="deed">
		<div id="deed-normal" style="display: none;">
			<div id="deed-header">
				<div style="margin: 5px; font-size: 11px;">Immobilienkarte</div>
				<div id="deed-name"></div>
			</div>
			<table id="deed-table">
				<tr>
                    <td colspan="2">
						Grundstückswert = Summe der Baukosten
					</td>
                </tr>
                <tr>
                    <td style="text-align: left;"><b>Baukosten je Haus: </b></td>
					<td style="text-align: right;"><b><span id="deed-houseprice">12</span></b></td>
                </tr>
                <tr style="border-bottom:1px solid black">
                    <td colspan="2">
						Baukosten werden sofort anteilig an alle Mitspielenden ausgezahlt.
					</td>
				</tr>
				<tr>
                    <td style="text-align: left;"><b>Miete: </b></td>
					<td style="text-align: right;"><b><span id="deed-rent">60</span></b></td>
                </tr>
                <tr>
                    <td colspan="2">
						Fällig, wenn ein Spielzug auf diesem Feld endet.
					</td>
				</tr>
			</table>
		</div>

		<div id="deed-mortgaged">
			<div id="deed-mortgaged-name"></div>
			<p>&bull;</p>
			<div>Hypothek aufgenommen</div>
			<div> für <span id="deed-mortgaged-mortgage">80</span></div>
			<p>&bull;</p>
			<div style="font-style: italic; font-size: 13px; margin: 10px;">Karte muss mit dieser Seite nach oben liegen, wenn eine Hypothek aufgenommen wurde.</div>
		</div>

		<div id="deed-special">
			<div id="deed-special-name"></div>
			<div id="deed-special-text"></div>
			<div id="deed-special-footer">
				Mortgage Value
				<span style="float: right;">$<span id="deed-special-mortgage">100</span>.</span>
			</div>
		</div>
	</div>

	<table id="board">
		<tr>
			<td class="cell board-corner" id="cell6"></td>
			<td class="cell board-top" id="cell7"></td>
			<td class="cell board-top" id="cell8"></td>
			<td class="cell board-corner" id="cell9"></td>
		</tr><tr>
			<td class="cell board-left" id="cell5"></td>
			<td colspan="2" class="board-center"></td>
			<td class="cell board-right" id="cell10"></td>
		</tr><tr>
			<td class="cell board-left" id="cell4"></td>
			<td colspan="2" class="board-center"></td>
			<td class="cell board-right" id="cell11"></td>
		</tr><tr>
			<td class="cell board-corner" id="cell3"></td>
			<td class="cell board-bottom" id="cell2"></td>
			<td class="cell board-bottom" id="cell1"></td>
			<td class="cell board-corner" id="cell0"></td>
		</tr>
	</table>
	
	<div id="moneybarwrap">
		<div id="moneybar">
			<table>
				<tr id="moneybarrow1" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p1arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p1moneybar" class="moneybarcell">
						<div><span id="p1moneyname" >Player 1</span>:</div>
						<div>Guthaben: <span id="p1money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p1credit" class="player-credit">0</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p1dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" title="Summe aus Anleihen, Derivaten und Immobilien (inkl.Häusern.)">verfügbare Kreditsumme: <span id="p1avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p1anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p1derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button" ><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow2" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p2arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p2moneybar" class="moneybarcell">
						<div><span id="p2moneyname" >Player 2</span>:</div>
						<div>Guthaben: <span id="p2money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p2credit" class="player-credit">1500</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p2dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" >verfügbare Kreditsumme: <span id="p2avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p2anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p2derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button" ><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow3" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p3arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p3moneybar" class="moneybarcell">
						<div><span id="p3moneyname" >Player 3</span>:</div>
						<div>Guthaben: <span id="p3money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p3credit" class="player-credit">1500</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p3dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" >verfügbare Kreditsumme: <span id="p3avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p3anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p3derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button" ><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow4" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p4arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p4moneybar" class="moneybarcell">
						<div><span id="p4moneyname" >Player 4</span>:</div>
						<div>Guthaben: <span id="p4money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p4credit" class="player-credit">1500</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p4dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" >verfügbare Kreditsumme: <span id="p4avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p4anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p4derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button" ><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow5" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p5arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p5moneybar" class="moneybarcell">
						<div><span id="p5moneyname" >Player 5</span>:</div>
						<div>Guthaben: <span id="p5money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p5credit" class="player-credit">1500</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p5dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" >verfügbare Kreditsumme: <span id="p5avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p5anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p5derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button" ><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow6" class="money-bar-row">
					<td class="moneybararrowcell"><span><i id="p6arrow" class="money-bar-arrow fa-solid fa-arrow-right"></i></span></td>
					<td id="p6moneybar" class="moneybarcell">
						<div><span id="p6moneyname" >Player 6</span>:</div>
						<div>Guthaben: <span id="p6money">1500</span></div>
						<div class="moneyopt" >Kredit: <span id="p6credit" class="player-credit">1500</span></div>
						<div class="moneyopt" >Dispokredit: <span id="p6dispocredit" class="player-credit">0</span></div>
                        <div class="moneyopt" >verfügbare Kreditsumme: <span id="p6avcredit" class="player-avcredit">0</span></div>
                        <div class="moneyopt" >Anleihen: <span id="p6anleihen" class="player-anleihen">0</span></div>
                        <div class="moneyopt" >Derivate: <span id="p6derivate" class="player-derivate">0</span></div>
						<div>
							<button class="max-button"><i class="fa-solid fa-maximize"></i></button>
							<button class="min-button" style="display: none;" ><i class="fa-solid fa-minimize"></i></button>
						</div>
					</td>
				</tr>
				<tr id="moneybarrow7" class="money-bar-row">
					<td class="moneybararrowcell"></td>
					<td id="p7moneybar" class="moneybarcell">
						<div><span id="p7moneyname" >Bank</span>:</div>
						<div>Geldmenge: <span id="p7money">1500</span></div>
						<div>Zinsen: <span id="p7credit">1500</span></div>
                        <div>Anleihen: <span id="p7anleihen" class="player-anleihen">0</span></div>
                        <div>Derivate: <span id="p7derivate" class="player-derivate">0</span></div>
					</td>
				</tr>
				<tr id="moneybarrow8" class="money-bar-row">
					<td class="moneybararrowcell"></td>
					<td id="p8moneybar" class="moneybarcell">
						<div><span id="p8moneyname" >Staat</span>:</div>
						<div>Staatsschuld: <span id="p8money" class="player-credit">1500</span></div>
						<div>Steuer: <span id="p8credit">1500</span></div>
					</td>
				</tr>
			</table>
		</div>
	</div>

	<div id="setup">

		<div id="mytitle" > Spiel - Geldmaschine </div>
    
		<div id="setup-scrollable">
			<table>
				<tbody>
				<tr id="setup-nieten">
					<td><div id="nietenfield">
						Anzahl Nieten
					</div></td>
					<td>
						<select id="nieten" title="Wähle die Anzahl der Nieten.">
							<option id="nieten0">0</option>
							<option id="nieten1">1</option>
							<option id="nieten2">2</option>
							<option id="nieten4">4</option>
							<option id="nieten7">7</option>
							<option id="nieten8">8</option>
							<option id="nieten10">10</option>
						</select>
					</td>
				</tr>
				<tr id="setup-spieler">
					<td><div id="spielerfield">
						Anzahl SpielerInnen
					</div></td>
					<td>
						<select id="spieler" title="Wähle die Anzahl der Spieler.">
							<option id="spieler3">3</option>
							<option id="spieler4">4</option>
							<option id="spieler5">5</option>
							<option id="spieler6">6</option>
						</select>
					</td>
				</tr>
				<tr id="player1input" class="player-input">
					<td><span>SpielerIn 1:</span></td>
					<td>
						<span id="player1name" ></span>
					</td>
				</tr>
				<tr id="player2input" class="player-input">
					<td><span>SpielerIn 2:</span></td>
					<td>
						<span id="player2name" ></span>
					</td>
				</tr>
				<tr id="player3input" class="player-input">
					<td><span>SpielerIn 3:</span></td>
					<td>
						<span id="player3name" ></span>
					</td>
				</tr>
				<tr id="player4input" class="player-input">
					<td><span>SpielerIn 4:</span></td>
					<td>
						<span id="player4name" ></span>
					</td>
				</tr>
				<tr id="player5input" class="player-input">
					<td><span>SpielerIn 5:</span></td>
					<td>
						<span id="player5name" ></span>
					</td>
				</tr>
				<tr id="player6input" class="player-input">
					<td><span>SpielerIn 6:</span></td>
					<td>
						<span id="player6name" ></span>
					</td>
				</tr><tr>
					<td><div style="margin: 20px 0px;">
						<input id="startbutton" type="button" value="Spiel beginnen" title="Starte das Spiel." />
					</div></td>
					<td>
						<button class="add-button">App installieren</button>
					</td>
					</tr>
				</tbody>
			</table>

			<div id="description">
				<span>Das Spiel „Geldmaschine“ hat Samirah Kenawi entwickelt, damit Interessierte sich auf spielerische Weise Wissen über das Funktionieren unseres Geldsystems aneignen können.<br><br>
					Zu den zwei Varianten der Ereigniskarten (Phase 1 und Phase 2) haben viele die richtige Idee: Phase 2 beginnt mit der Marktsättigung, wenn keine (ausreichende) privaten Investitionen mehr stattfinden. Der Staat versucht durch seine Wirtschafts- und Geldpolitik darauf zu reagieren.<br><br>
					Natürlich ist das spielerische Modell stark vereinfacht. Es macht jedoch erfahrbar, wie durch Kreditaufnahme für Investitionen Geld in Umlauf kommt und wie die Geldversorgung ins Stocken gerät, wenn diese private Kreditaufnahme sinkt. Auch lässt es – wenn lange genug gespielt wird –, erkennen, wie Wertpapierhandel zu einem notwendigen Bestandteil der Ökonomie wird und welche Dynamik er entwickelt.<br><br>
					Inzwischen hat Dominik Hüsener eine online-Version des Spiels erarbeitet. Sie ist noch relativ einfach gehalten. Allerdings erfolgen alle Buchungen automatisch und sehr viel schneller als mittels der Tabellen für die Brettspielversion. Um online spielen zu können, muss das Spiel von mindestens 3 Personen zeitnah geöffnet werden. Sinnvoll ist es, wenn alle Mitspielenden nebenbei einem virtuellen Raum beitreten, wobei die Kameras ausgeschaltet werden können. Dann können alle während des Spielens jederzeit miteinander reden.<br><br>
					Wissen ist Macht. Um das heutige krisenbehaftete System überwinden zu können, müssen wir es verstehen lernen. Dazu will das Spiel einen Beitrag leisten.
				</span>
			</div>
    	</div>

		<div id="credits">
			<ul>
				<li><a href="https://falschgeldsystem.de/spiel/" target="_blank"><i class="fa-solid fa-info"></i> Anleitung</a></li>
				<li><a href="mailto:dominik.huesener@rwth-aachen.de"><i class="fa-solid fa-comment"></i> Feedback</a></li>
				<li><a href="./client/privacy.html" target="_blank"><i class="fa-solid fa-shield"></i> Datenschutz</a></li>
				<!--<li><a href="https://www.paypal.com/donate/?hosted_button_id=KZ5T8R62UZ77C" target="_blank"><i class="fa-solid fa-circle-dollar-to-slot"></i> Spenden</a></li>-->
			</ul>
		</div>
	</div>

	<div id="icon-bar">

		<a class="active" id="logicon" href="javascript:void(0)" onclick="openLog()" title="Den Spielverlauf anzeigen"><i class="fa-solid fa-align-justify"></i></a>
		<a href="javascript:void(0)" onclick="openImmobilien()" title="Grundstücke anzeigen und Häuser kaufen"><i class="fa-solid fa-house"></i></a>
		<a href="javascript:void(0)" onclick="showTradeMenu()" title="Grundstücke, Anleihen und Derivate mit Spielern und Bank tauschen"><i class="fa-solid fa-people-arrows-left-right"></i></a>
		<a href="javascript:void(0)" onclick="showCreditMenu()" title="Kredit aufnehmen oder tilgen"><i class="fa-solid fa-money-bill-1"></i></a>
		<a href="javascript:void(0)" onclick="showStats()" title="Statistik anzeigen"><i class="fa-solid fa-info"></i></a>
		<a href="javascript:void(0)" onclick="showGraph()" title="Verlauf von Geldmenge und Zinsen anzeigen"><i class="fa-solid fa-chart-line"></i></a>
		<a id="zinsen" href="javascript:void(0)" onclick="setZinssatz()"><i class="fa-solid fa-percent"></i></a>
		<!--<a href="javascript:void(0)" onclick="openAudioMenu()" title="Erklärungen anhören"><i class="fa-solid fa-headphones"></i></a>-->
			
	</div>

	<div id="control">
		<table>
			<tr>
				<td style="text-align: left; vertical-align: top; border: none;">

					<div id="buy">
						<div id="alert"></div>
						<div id="landed"></div>
					</div>

					<div id="manage">
						<div id="option">
							<div id="buildings" title="Available buildings"></div>
							<input type="button" value="Haus kaufen" id="buyhousebutton"/>
							<input type="button" value="Hypothek" id="mortgagebutton" />
							<input type="button" value="Haus verkaufen" id="sellhousebutton"/>
						</div>
						<div id="owned"></div>
					</div>

					<div id="audio">
						<!--<div>Beschreibung</div>
						<audio controls>
							<source src="./client/audio.mp3" type="audio/mpeg">
							Your browser does not support the audio element.
						</audio>-->
					</div>
				</td>
				<td style="vertical-align: top; border: none;">
					<div id="quickstats" >
						<div><span id="pname" >Player 1</span>:</div>
						<div><span id="pmoney">$1500</span></div>
					</div>
					<div>
						<div id="die0" title="Die" class="die die-no-img"></div>
					</div>

				</td>
			</tr><tr>
				<td colspan="2" style="border: none">
					<div style="padding-top: 8px;">
						<input type="button" id="nextbutton" title="Würfel und rücke entsprechend vor." value="Würfeln"/>
						<input type="button" id="creditbutton" title="Du musst einen Kredit aufnehmen, um dein Guthaben auszugleichen." value="Kredit aufnehmen"/>
						<input type="button" id="resignbutton" title="Wenn du deine Schulden nicht zahlen kannst, zahlt der Staat dir Sozialhilfe." value="Sozialhilfe beziehen"/>
					</div>
				</td>
			</tr>
		</table>
	</div>

	<div id="trade">
		<table style="border-spacing: 3px;">
			<tr>
				<td class="trade-cell">
					<div id="trade-leftp-name"></div>
				</td>
				<td class="trade-cell">
					<div id="trade-rightp-name"></div>
				</td>
			</tr>
			<tr>
				<td class="trade-cell">
					Geld: &nbsp;<input id="trade-leftp-money" value="0" type="number" title="Wie viel Geld möchtest du tauschen?" />
				</td>
				<td class="trade-cell">
					Geld: &nbsp;<input id="trade-rightp-money" value="0" type="number" title="Wie viel Geld möchtest du tauschen?" />
				</td>
			</tr>
            <tr>
				<td class="trade-cell">
					Derivate: &nbsp;<input id="trade-leftp-derivate" value="0" type="number" title="Wie viele Derivate möchtest du tauschen?" />
				</td>
				<td class="trade-cell">
					<span id="description-derivate" >Derivate:</span> &nbsp;<input id="trade-rightp-derivate" value="0" type="number" title="Wie viele Derivate möchtest du tauschen?" />
				</td>
			</tr>
            <tr>
				<td class="trade-cell">
					Anleihen: &nbsp;<input id="trade-leftp-anleihen" value="0" type="number" title="Wie viele Anleihen möchtest du tauschen?" />
				</td>
				<td class="trade-cell">
					Anleihen: &nbsp;<input id="trade-rightp-anleihen" value="0" type="number" title="Wie viele Anleihen möchtest du tauschen?" />
				</td>
			</tr>
			<tr>
				<td id="trade-leftp-property" class="trade-cell"></td>
				<td id="trade-rightp-property" class="trade-cell"></td>
			</tr>
			<tr>
				<td id="trade-leftp-assets" class="trade-cell"></td>
				<td id="trade-rightp-assets" class="trade-cell"></td>
			</tr>
			<tr>
				<td colspan="2" class="trade-cell">
					<input type="button" id="proposetradebutton" value="Tausch anbieten" onclick="proposeTrade();" title="Handel mit Geld, Grundstücken, Anleihen und Derivaten anbieten." />
					<input type="button" id="canceltradebutton" value="Abbrechen" onclick="cancelTrade();" title="Tausch abbrechen." />
					<input type="button" id="accepttradebutton" value="Tausch annehmen" onclick="acceptTrade();" title="Nehme den angebotenen Tausch an." />
					<input type="button" id="rejecttradebutton" value="Tausch ablehnen" onclick="cancelTrade();" title="Lehne den angebotenen Tausch ab." />
				</td>
			</tr>
		</table>
	</div>

	<div id="credit">
		<table style="border-spacing: 3px;">
			<tr>
				<td class="credit-cell">
					<div id="credit-leftp-name"></div>
				</td>
			</tr>
			<tr>
				<td class="credit-cell">
					$&nbsp;<input id="credit-leftp-money" value="0" type="number" title="Gewünschte Höhe des Kredits eingeben." />
				</td>
			</tr>
			<tr>
				<td colspan="2" class="credit-cell">
					<input type="button" id="kreditaufnehmenbutton" value="Kredit aufnehmen" title="Kredit aufnehmen." />
					<input type="button" id="kredittilgenbutton" value="Kredit tilgen" title="Kredit tilgen." />
                    <input type="button" id="kreditcancelbutton" value="Schließen" onclick="cancelkredit();" title="Fenster schließen." />
				</td>
			</tr>
		</table>
	</div>

	<script>
		window.addEventListener('beforeunload', function (e) {
			// Cancel the event
			e.preventDefault(); // If you prevent default behavior in Mozilla Firefox prompt will always be shown
			e.stopImmediatePropagation();
			// Chrome requires returnValue to be set
			e.returnValue = '';
		});

		const socket = io();

		var playerId;
		var pcount;

		const start = document.getElementById('startbutton');

		start.onclick = function(e){
			//prevent the form from refreshing the page
			e.preventDefault();

			socket.emit("windowload");

			var nieten = document.getElementById("nieten").value;
			var pNo = document.getElementById("spieler").value;
			socket.emit('setup', true, pNo, nieten);
		}

		socket.on('setPlayerId',function(data){
			setPlayerId(data);    
		});

		function setPlayerId(id) {
			playerId = id;

			if (playerId != 1) {
				$("#zinsen").hide();
				$("#setup-nieten, #setup-spieler").hide();
				$("#startbutton").hide();
			}
		}

		socket.on('playerno',function(pnumber){
			pcount = pnumber;
			playernumber_onchange();
		});

		socket.on('playerNames', function(names) {
			setPlayernames(names);
		});

		function setPlayernames(names) {
			for (var i in names) {
				document.getElementById("player" + i + "name").innerHTML = names[i];
			}
		}

		var pcount;

		function playernumber_onchange() {

			$(".player-input").hide();

			for (var i = 1; i <= pcount; i++) {
				$("#player" + i + "input").show();
			}
			switch(pcount) {
				case 6:
					$("#spieler5").hide();
					document.getElementById("spieler5").selected = true;
				case 5:
					$("#spieler4").hide();
					document.getElementById("spieler4").selected = true;
				case 4:
					$("#spieler3").hide();
					document.getElementById("spieler3").selected = true;
			}
			capitalism_onchange()

			if (playerId == 1 && pcount < 7) {
				$("#startbutton").show();
			} else {
				$("#startbutton").hide();
			}
		}

		function capitalism_onchange() {

			$("#nietenfield").show()
			$("#spielerfield").show()

			$("#nieten0").hide();
			$("#nieten1").hide();
			$("#nieten2").hide();
			$("#nieten4").hide();
			$("#nieten7").hide();
			$("#nieten8").hide();
			$("#nieten10").hide();

			var anzahlSpieler = document.getElementById("spieler").value;
			switch (parseInt(anzahlSpieler)) {
				case 3:
					$("#nieten0").show();
					document.getElementById("nieten0").selected = true;
					$("#nieten2").show();
					$("#nieten4").show();
					break;
				case 4:
					$("#nieten1").show();
					document.getElementById("nieten1").selected = true;
					$("#nieten4").show();
					$("#nieten7").show();
					break;
				case 5:
					$("#nieten0").show();
					document.getElementById("nieten0").selected = true;
					$("#nieten4").show();
					$("#nieten8").show();
					break;
				case 6:
					$("#nieten2").show();
					document.getElementById("nieten2").selected = true;
					$("#nieten7").show();
					break;
			}
		}

		function showSetup() {

			playernumber_onchange();

			$("#spieler").on("change", capitalism_onchange);

			capitalism_onchange();

			$("#setup").show();

			// Create event handlers for hovering and draging.

			var drag, dragX, dragY, dragObj, dragTop, dragLeft;

			$("body").on("mousemove", function(e) {
				var object;

				if (e.target) {
					object = e.target;
				} else if (window.event && window.event.srcElement) {
					object = window.event.srcElement;
				}


				if (object.classList.contains("propertycellcolor") || object.classList.contains("statscellcolor")) {
					if (e.clientY + 20 > window.innerHeight - 404) {
						document.getElementById("deed").style.top = (window.innerHeight - 404) + "px";
					} else {
						document.getElementById("deed").style.top = (e.clientY + 20) + "px";
					}
					document.getElementById("deed").style.left = (e.clientX + 10) + "px";


				} else if (drag) {
					if (e) {
						dragObj.style.left = (dragLeft + e.clientX - dragX) + "px";
						dragObj.style.top = (dragTop + e.clientY - dragY) + "px";

					} else if (window.event) {
						dragObj.style.left = (dragLeft + window.event.clientX - dragX) + "px";
						dragObj.style.top = (dragTop + window.event.clientY - dragY) + "px";
					}
				}
			});


			$("body").on("mouseup", function() {

				drag = false;
			});

		};

		if ('serviceWorker' in navigator) {
			navigator.serviceWorker
			.register('./sw.js')
			.then(() => { console.log('Service Worker Registered'); });
		}  

		let deferredPrompt;
		const addBtn = document.querySelector('.add-button');
		addBtn.style.display = 'none';

		window.addEventListener('beforeinstallprompt', (e) => {
			// Prevent Chrome 67 and earlier from automatically showing the prompt
			e.preventDefault();
			// Stash the event so it can be triggered later.
			deferredPrompt = e;
			// Update UI to notify the user they can add to home screen
			addBtn.style.display = 'block';

			addBtn.addEventListener('click', (e) => {
			// hide our user interface that shows our A2HS button
			addBtn.style.display = 'none';
			// Show the prompt
			deferredPrompt.prompt();
			// Wait for the user to respond to the prompt
			deferredPrompt.userChoice.then((choiceResult) => {
				if (choiceResult.outcome === 'accepted') {
					console.log('User accepted the A2HS prompt');
				} else {
					console.log('User dismissed the A2HS prompt');
				}
				deferredPrompt = null;
				});
			});
		});  
	</script>
</body>
</html>
